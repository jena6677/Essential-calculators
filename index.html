<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Calculators Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .calculator-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .result-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .slider::-webkit-slider-thumb {
            appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .slider::-moz-range-thumb {
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üí∞ Financial Calculators Hub</h1>
            <p class="text-gray-600">Plan your investments and loans with precision</p>
        </div>

        <!-- Tab Navigation -->
        <div class="grid grid-cols-2 gap-3 md:flex md:flex-wrap md:justify-center mb-8 bg-white rounded-lg shadow-lg p-4">
            <button class="tab-button px-3 py-3 md:px-4 md:py-2 md:m-1 rounded-lg font-medium transition-all duration-300 active text-sm md:text-base" onclick="showTab('sip')">
                üìà SIP Calculator
            </button>
            <button class="tab-button px-3 py-3 md:px-4 md:py-2 md:m-1 rounded-lg font-medium transition-all duration-300 text-sm md:text-base" onclick="showTab('lumpsum')">
                üíé Lumpsum Calculator
            </button>
            <button class="tab-button px-3 py-3 md:px-4 md:py-2 md:m-1 rounded-lg font-medium transition-all duration-300 text-sm md:text-base" onclick="showTab('emi-floating')">
                üè† EMI (Floating Rate)
            </button>
            <button class="tab-button px-3 py-3 md:px-4 md:py-2 md:m-1 rounded-lg font-medium transition-all duration-300 text-sm md:text-base" onclick="showTab('emi-flat')">
                üè¶ EMI (Flat Rate)
            </button>
        </div>

        <!-- SIP Calculator -->
        <div id="sip" class="tab-content active">
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 md:gap-8">
                <div class="calculator-card rounded-xl shadow-xl p-4 md:p-6 text-white">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center">
                        üìà SIP Calculator
                    </h2>
                    <form id="sipForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Monthly Investment Amount: ‚Çπ<span id="sipAmountValue">5000</span></label>
                            <input type="range" id="sipAmountSlider" min="500" max="100000" step="500" value="5000" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="sipAmount" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="5000" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Expected Annual Return Rate: <span id="sipRateValue">12</span>%</label>
                            <input type="range" id="sipRateSlider" min="1" max="30" step="0.5" value="12" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="sipRate" step="0.1" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="12" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Investment Duration: <span id="sipYearsValue">10</span> Years</label>
                            <input type="range" id="sipYearsSlider" min="1" max="40" step="1" value="10" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="sipYears" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="10" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Annual SIP Increment: <span id="sipIncrementValue">0</span>%</label>
                            <input type="range" id="sipIncrementSlider" min="0" max="20" step="1" value="0" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="sipIncrement" step="0.1" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="0">
                            <p class="text-xs mt-1 opacity-75">Set to 0 for no increment</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Additional Holding Period: <span id="sipHoldingValue">0</span> Years</label>
                            <input type="range" id="sipHoldingSlider" min="0" max="20" step="1" value="0" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="sipHolding" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="0">
                            <p class="text-xs mt-1 opacity-75">Years to hold after SIP ends (no new investments)</p>
                        </div>
                    </form>
                </div>
                
                <div class="space-y-4 md:space-y-6">
                    <div id="sipResult" class="result-card rounded-xl shadow-xl p-4 md:p-6 text-white hidden">
                        <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üìä SIP Results</h3>
                        <div class="space-y-2 md:space-y-3">
                            <div class="flex justify-between text-sm md:text-base">
                                <span>Total Investment:</span>
                                <span id="sipInvested" class="font-bold"></span>
                            </div>
                            <div class="flex justify-between text-sm md:text-base">
                                <span>Total Returns:</span>
                                <span id="sipReturns" class="font-bold"></span>
                            </div>
                            <div class="flex justify-between text-base md:text-lg border-t pt-2 font-bold">
                                <span>Maturity Value:</span>
                                <span id="sipMaturity" class="font-bold"></span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-xl p-3 md:p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Investment Growth</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">Chart</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="sipToggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                                <span class="text-sm text-gray-600">Table</span>
                            </div>
                        </div>
                        <div id="sipChartView">
                            <canvas id="sipChart" class="w-full h-64 md:h-80"></canvas>
                        </div>
                        <div id="sipTableView" class="hidden">
                            <div class="h-64 md:h-80 overflow-y-auto">
                                <table class="w-full text-sm">
                                    <thead class="bg-gray-50 sticky top-0">
                                        <tr>
                                            <th class="px-3 py-2 text-left text-gray-700 font-medium">Year</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Monthly SIP</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Year Investment</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Total Invested</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Year End Value</th>
                                            <th class="px-3 py-2 text-center text-gray-700 font-medium">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sipTableBody" class="divide-y divide-gray-200">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lumpsum Calculator -->
        <div id="lumpsum" class="tab-content">
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 md:gap-8">
                <div class="calculator-card rounded-xl shadow-xl p-4 md:p-6 text-white">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center">
                        üíé Lumpsum Calculator
                    </h2>
                    <form id="lumpsumForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Investment Amount: ‚Çπ<span id="lumpsumAmountValue">100000</span></label>
                            <input type="range" id="lumpsumAmountSlider" min="10000" max="10000000" step="10000" value="100000" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="lumpsumAmount" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="100000" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Expected Annual Return Rate: <span id="lumpsumRateValue">12</span>%</label>
                            <input type="range" id="lumpsumRateSlider" min="1" max="30" step="0.5" value="12" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="lumpsumRate" step="0.1" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="12" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Time Period: <span id="lumpsumYearsValue">10</span> Years</label>
                            <input type="range" id="lumpsumYearsSlider" min="1" max="40" step="1" value="10" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="lumpsumYears" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="10" required>
                        </div>
                    </form>
                </div>
                
                <div class="space-y-4 md:space-y-6">
                    <div id="lumpsumResult" class="result-card rounded-xl shadow-xl p-4 md:p-6 text-white hidden">
                        <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üìä Lumpsum Results</h3>
                        <div class="space-y-2 md:space-y-3">
                            <div class="flex justify-between text-sm md:text-base">
                                <span>Initial Investment:</span>
                                <span id="lumpsumInvested" class="font-bold"></span>
                            </div>
                            <div class="flex justify-between text-sm md:text-base">
                                <span>Total Returns:</span>
                                <span id="lumpsumReturns" class="font-bold"></span>
                            </div>
                            <div class="flex justify-between text-base md:text-lg border-t pt-2 font-bold">
                                <span>Maturity Value:</span>
                                <span id="lumpsumMaturity" class="font-bold"></span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-xl p-3 md:p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Investment Growth</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">Chart</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="lumpsumToggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                                <span class="text-sm text-gray-600">Table</span>
                            </div>
                        </div>
                        <div id="lumpsumChartView">
                            <canvas id="lumpsumChart" class="w-full h-64 md:h-80"></canvas>
                        </div>
                        <div id="lumpsumTableView" class="hidden">
                            <div class="h-64 md:h-80 overflow-y-auto">
                                <table class="w-full text-sm">
                                    <thead class="bg-gray-50 sticky top-0">
                                        <tr>
                                            <th class="px-3 py-2 text-left text-gray-700 font-medium">Year</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Year Growth</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Current Value</th>
                                            <th class="px-3 py-2 text-right text-gray-700 font-medium">Total Returns</th>
                                            <th class="px-3 py-2 text-center text-gray-700 font-medium">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="lumpsumTableBody" class="divide-y divide-gray-200">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EMI Calculator (Floating Rate) -->
        <div id="emi-floating" class="tab-content">
            <div class="max-w-4xl mx-auto">
                <div class="calculator-card rounded-xl shadow-xl p-4 md:p-6 text-white">
                    <h2 class="text-lg md:text-2xl font-bold mb-4 md:mb-6 flex items-center">
                        üè† EMI Calculator (Floating Interest Rate)
                    </h2>
                    <form id="emiFloatingForm" class="grid grid-cols-1 gap-4 md:gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Loan Amount: ‚Çπ<span id="floatingLoanAmountValue">1000000</span></label>
                            <input type="range" id="floatingLoanAmountSlider" min="100000" max="50000000" step="100000" value="1000000" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="floatingLoanAmount" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="1000000" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Annual Interest Rate: <span id="floatingRateValue">8.5</span>%</label>
                            <input type="range" id="floatingRateSlider" min="3" max="20" step="0.1" value="8.5" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="floatingRate" step="0.1" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="8.5" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Loan Tenure: <span id="floatingTenureValue">240</span> Months</label>
                            <input type="range" id="floatingTenureSlider" min="12" max="360" step="12" value="240" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="floatingTenure" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="240" required>
                        </div>
                    </form>
                </div>
                
                <div id="floatingResult" class="result-card rounded-xl shadow-xl p-4 md:p-6 text-white mt-6 md:mt-8 hidden">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üìä EMI Calculation Results</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="floatingEMI"></div>
                            <div class="text-xs md:text-sm opacity-80">Monthly EMI</div>
                        </div>
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="floatingTotalInterest"></div>
                            <div class="text-xs md:text-sm opacity-80">Total Interest</div>
                        </div>
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="floatingTotalAmount"></div>
                            <div class="text-xs md:text-sm opacity-80">Total Amount</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EMI Calculator (Flat Rate) -->
        <div id="emi-flat" class="tab-content">
            <div class="max-w-4xl mx-auto">
                <div class="calculator-card rounded-xl shadow-xl p-4 md:p-6 text-white">
                    <h2 class="text-lg md:text-2xl font-bold mb-4 md:mb-6 flex items-center">
                        üè¶ EMI Calculator (Flat Interest Rate)
                    </h2>
                    <form id="emiFlatForm" class="grid grid-cols-1 gap-4 md:gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Loan Amount: ‚Çπ<span id="flatLoanAmountValue">1000000</span></label>
                            <input type="range" id="flatLoanAmountSlider" min="100000" max="50000000" step="100000" value="1000000" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="flatLoanAmount" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="1000000" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Annual Interest Rate: <span id="flatRateValue">8.5</span>%</label>
                            <input type="range" id="flatRateSlider" min="3" max="20" step="0.1" value="8.5" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="flatRate" step="0.1" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="8.5" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Loan Tenure: <span id="flatTenureValue">240</span> Months</label>
                            <input type="range" id="flatTenureSlider" min="12" max="360" step="12" value="240" class="w-full h-2 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider mb-2">
                            <input type="number" id="flatTenure" class="w-full px-3 md:px-4 py-2 md:py-3 rounded-lg text-gray-800 border-0 focus:ring-2 focus:ring-blue-300 text-sm md:text-base" value="240" required>
                        </div>
                    </form>
                </div>
                
                <div id="flatResult" class="result-card rounded-xl shadow-xl p-4 md:p-6 text-white mt-6 md:mt-8 hidden">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">üìä EMI Calculation Results</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="flatEMI"></div>
                            <div class="text-xs md:text-sm opacity-80">Monthly EMI</div>
                        </div>
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="flatTotalInterest"></div>
                            <div class="text-xs md:text-sm opacity-80">Total Interest</div>
                        </div>
                        <div class="text-center bg-white bg-opacity-20 rounded-lg p-3">
                            <div class="text-lg md:text-2xl font-bold" id="flatTotalAmount"></div>
                            <div class="text-xs md:text-sm opacity-80">Total Amount</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let sipChart, lumpsumChart;

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Format currency
        function formatCurrency(amount) {
            return '‚Çπ' + amount.toLocaleString('en-IN');
        }

        // SIP Calculator Function
        function calculateSIP() {
            const P = parseFloat(document.getElementById('sipAmount').value);
            const r = parseFloat(document.getElementById('sipRate').value) / 100;
            const n = parseFloat(document.getElementById('sipYears').value);
            const increment = parseFloat(document.getElementById('sipIncrement').value) || 0;
            const holdingPeriod = parseFloat(document.getElementById('sipHolding').value) || 0;
            
            if (P <= 0 || r <= 0 || n <= 0) {
                return;
            }
            
            const monthlyRate = r / 12;
            const totalMonths = n * 12;
            const annualIncrement = increment / 100;
            
            let futureValue = 0;
            let totalInvested = 0;
            let currentSIP = P;
            
            if (increment > 0) {
                // Calculate SIP with annual increment
                for (let year = 1; year <= n; year++) {
                    const monthsInYear = 12;
                    const remainingMonths = totalMonths - ((year - 1) * 12);
                    const monthsToCalculate = Math.min(monthsInYear, remainingMonths);
                    
                    // Calculate future value for this year's SIP amount
                    const yearFV = currentSIP * (((Math.pow(1 + monthlyRate, remainingMonths) - Math.pow(1 + monthlyRate, remainingMonths - monthsToCalculate)) / monthlyRate) * (1 + monthlyRate));
                    futureValue += yearFV;
                    totalInvested += currentSIP * monthsToCalculate;
                    
                    // Increment SIP for next year
                    currentSIP = currentSIP * (1 + annualIncrement);
                }
            } else {
                // Standard SIP calculation without increment
                futureValue = P * (((Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate) * (1 + monthlyRate));
                totalInvested = P * totalMonths;
            }
            
            // Apply holding period growth if specified
            if (holdingPeriod > 0) {
                futureValue = futureValue * Math.pow(1 + r, holdingPeriod);
            }
            
            const totalReturns = futureValue - totalInvested;
            
            document.getElementById('sipInvested').textContent = formatCurrency(Math.round(totalInvested));
            document.getElementById('sipReturns').textContent = formatCurrency(Math.round(totalReturns));
            document.getElementById('sipMaturity').textContent = formatCurrency(Math.round(futureValue));
            document.getElementById('sipResult').classList.remove('hidden');
            
            // Create SIP growth chart
            createSIPChart(P, monthlyRate, n, annualIncrement, holdingPeriod);
        }

        // SIP Slider Event Listeners
        document.getElementById('sipAmountSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            document.getElementById('sipAmount').value = value;
            calculateSIP();
        });

        document.getElementById('sipRateSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipRateValue').textContent = value;
            document.getElementById('sipRate').value = value;
            calculateSIP();
        });

        document.getElementById('sipYearsSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipYearsValue').textContent = value;
            document.getElementById('sipYears').value = value;
            calculateSIP();
        });

        document.getElementById('sipIncrementSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipIncrementValue').textContent = value;
            document.getElementById('sipIncrement').value = value;
            calculateSIP();
        });

        document.getElementById('sipHoldingSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipHoldingValue').textContent = value;
            document.getElementById('sipHolding').value = value;
            calculateSIP();
        });

        // SIP Input Field Event Listeners
        document.getElementById('sipAmount').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipAmountSlider').value = value;
            document.getElementById('sipAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            calculateSIP();
        });

        document.getElementById('sipRate').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipRateSlider').value = value;
            document.getElementById('sipRateValue').textContent = value;
            calculateSIP();
        });

        document.getElementById('sipYears').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipYearsSlider').value = value;
            document.getElementById('sipYearsValue').textContent = value;
            calculateSIP();
        });

        document.getElementById('sipIncrement').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipIncrementSlider').value = value;
            document.getElementById('sipIncrementValue').textContent = value;
            calculateSIP();
        });

        document.getElementById('sipHolding').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('sipHoldingSlider').value = value;
            document.getElementById('sipHoldingValue').textContent = value;
            calculateSIP();
        });

        // Toggle Event Listeners
        document.getElementById('sipToggle').addEventListener('change', function() {
            const chartView = document.getElementById('sipChartView');
            const tableView = document.getElementById('sipTableView');
            
            if (this.checked) {
                chartView.classList.add('hidden');
                tableView.classList.remove('hidden');
                generateSIPTable();
            } else {
                chartView.classList.remove('hidden');
                tableView.classList.add('hidden');
            }
        });

        document.getElementById('lumpsumToggle').addEventListener('change', function() {
            const chartView = document.getElementById('lumpsumChartView');
            const tableView = document.getElementById('lumpsumTableView');
            
            if (this.checked) {
                chartView.classList.add('hidden');
                tableView.classList.remove('hidden');
                generateLumpsumTable();
            } else {
                chartView.classList.remove('hidden');
                tableView.classList.add('hidden');
            }
        });

        // Initialize all calculations on page load
        document.addEventListener('DOMContentLoaded', function() {
            calculateSIP();
            calculateLumpsum();
            calculateFloatingEMI();
            calculateFlatEMI();
        });

        // Lumpsum Calculator Function
        function calculateLumpsum() {
            const P = parseFloat(document.getElementById('lumpsumAmount').value);
            const r = parseFloat(document.getElementById('lumpsumRate').value) / 100;
            const t = parseFloat(document.getElementById('lumpsumYears').value);
            
            if (P <= 0 || r <= 0 || t <= 0) {
                return;
            }
            
            // Lumpsum Formula: FV = P √ó (1 + r)^t
            const futureValue = P * Math.pow(1 + r, t);
            const totalReturns = futureValue - P;
            
            document.getElementById('lumpsumInvested').textContent = formatCurrency(P);
            document.getElementById('lumpsumReturns').textContent = formatCurrency(totalReturns);
            document.getElementById('lumpsumMaturity').textContent = formatCurrency(futureValue);
            document.getElementById('lumpsumResult').classList.remove('hidden');
            
            // Create Lumpsum growth chart
            createLumpsumChart(P, r, t);
        }

        // Lumpsum Slider Event Listeners
        document.getElementById('lumpsumAmountSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            document.getElementById('lumpsumAmount').value = value;
            calculateLumpsum();
        });

        document.getElementById('lumpsumRateSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumRateValue').textContent = value;
            document.getElementById('lumpsumRate').value = value;
            calculateLumpsum();
        });

        document.getElementById('lumpsumYearsSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumYearsValue').textContent = value;
            document.getElementById('lumpsumYears').value = value;
            calculateLumpsum();
        });

        // Lumpsum Input Field Event Listeners
        document.getElementById('lumpsumAmount').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumAmountSlider').value = value;
            document.getElementById('lumpsumAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            calculateLumpsum();
        });

        document.getElementById('lumpsumRate').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumRateSlider').value = value;
            document.getElementById('lumpsumRateValue').textContent = value;
            calculateLumpsum();
        });

        document.getElementById('lumpsumYears').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('lumpsumYearsSlider').value = value;
            document.getElementById('lumpsumYearsValue').textContent = value;
            calculateLumpsum();
        });

        // EMI Calculator (Floating Rate) Function
        function calculateFloatingEMI() {
            const P = parseFloat(document.getElementById('floatingLoanAmount').value);
            const r = parseFloat(document.getElementById('floatingRate').value) / 100 / 12;
            const n = parseFloat(document.getElementById('floatingTenure').value);
            
            if (P <= 0 || r <= 0 || n <= 0) {
                return;
            }
            
            // EMI Formula: EMI = [P √ó r √ó (1 + r)^n] / [(1 + r)^n ‚Äì 1]
            const emi = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
            const totalAmount = emi * n;
            const totalInterest = totalAmount - P;
            
            document.getElementById('floatingEMI').textContent = formatCurrency(Math.round(emi));
            document.getElementById('floatingTotalInterest').textContent = formatCurrency(Math.round(totalInterest));
            document.getElementById('floatingTotalAmount').textContent = formatCurrency(Math.round(totalAmount));
            document.getElementById('floatingResult').classList.remove('hidden');
        }

        // Floating EMI Slider Event Listeners
        document.getElementById('floatingLoanAmountSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingLoanAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            document.getElementById('floatingLoanAmount').value = value;
            calculateFloatingEMI();
        });

        document.getElementById('floatingRateSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingRateValue').textContent = value;
            document.getElementById('floatingRate').value = value;
            calculateFloatingEMI();
        });

        document.getElementById('floatingTenureSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingTenureValue').textContent = value;
            document.getElementById('floatingTenure').value = value;
            calculateFloatingEMI();
        });

        // Floating EMI Input Field Event Listeners
        document.getElementById('floatingLoanAmount').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingLoanAmountSlider').value = value;
            document.getElementById('floatingLoanAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            calculateFloatingEMI();
        });

        document.getElementById('floatingRate').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingRateSlider').value = value;
            document.getElementById('floatingRateValue').textContent = value;
            calculateFloatingEMI();
        });

        document.getElementById('floatingTenure').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('floatingTenureSlider').value = value;
            document.getElementById('floatingTenureValue').textContent = value;
            calculateFloatingEMI();
        });

        // EMI Calculator (Flat Rate) Function
        function calculateFlatEMI() {
            const P = parseFloat(document.getElementById('flatLoanAmount').value);
            const r = parseFloat(document.getElementById('flatRate').value);
            const n = parseFloat(document.getElementById('flatTenure').value);
            
            if (P <= 0 || r <= 0 || n <= 0) {
                return;
            }
            
            const tenureYears = n / 12;
            
            // Flat Rate Formula
            const totalInterest = (P * r * tenureYears) / 100;
            const totalAmount = P + totalInterest;
            const emi = totalAmount / n;
            
            document.getElementById('flatEMI').textContent = formatCurrency(Math.round(emi));
            document.getElementById('flatTotalInterest').textContent = formatCurrency(Math.round(totalInterest));
            document.getElementById('flatTotalAmount').textContent = formatCurrency(Math.round(totalAmount));
            document.getElementById('flatResult').classList.remove('hidden');
        }

        // Flat EMI Slider Event Listeners
        document.getElementById('flatLoanAmountSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatLoanAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            document.getElementById('flatLoanAmount').value = value;
            calculateFlatEMI();
        });

        document.getElementById('flatRateSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatRateValue').textContent = value;
            document.getElementById('flatRate').value = value;
            calculateFlatEMI();
        });

        document.getElementById('flatTenureSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatTenureValue').textContent = value;
            document.getElementById('flatTenure').value = value;
            calculateFlatEMI();
        });

        // Flat EMI Input Field Event Listeners
        document.getElementById('flatLoanAmount').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatLoanAmountSlider').value = value;
            document.getElementById('flatLoanAmountValue').textContent = parseInt(value).toLocaleString('en-IN');
            calculateFlatEMI();
        });

        document.getElementById('flatRate').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatRateSlider').value = value;
            document.getElementById('flatRateValue').textContent = value;
            calculateFlatEMI();
        });

        document.getElementById('flatTenure').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('flatTenureSlider').value = value;
            document.getElementById('flatTenureValue').textContent = value;
            calculateFlatEMI();
        });

        // Generate SIP Table
        function generateSIPTable() {
            const P = parseFloat(document.getElementById('sipAmount').value);
            const r = parseFloat(document.getElementById('sipRate').value) / 100;
            const n = parseFloat(document.getElementById('sipYears').value);
            const increment = parseFloat(document.getElementById('sipIncrement').value) || 0;
            const holdingPeriod = parseFloat(document.getElementById('sipHolding').value) || 0;
            
            if (P <= 0 || r <= 0 || n <= 0) {
                return;
            }
            
            const monthlyRate = r / 12;
            const annualIncrement = increment / 100;
            
            const tableBody = document.getElementById('sipTableBody');
            tableBody.innerHTML = '';
            
            let totalInvested = 0;
            let currentValue = 0;
            let currentSIP = P;
            
            // SIP investment period - yearly breakdown
            for (let year = 1; year <= n; year++) {
                let yearInvestment = 0;
                let yearStartValue = currentValue;
                let monthlyDetails = [];
                
                // Calculate monthly details for this year
                for (let month = 1; month <= 12; month++) {
                    const globalMonth = (year - 1) * 12 + month;
                    
                    totalInvested += currentSIP;
                    yearInvestment += currentSIP;
                    
                    // Calculate current value using compound interest
                    if (globalMonth === 1) {
                        currentValue = currentSIP * (1 + monthlyRate);
                    } else {
                        currentValue = (currentValue + currentSIP) * (1 + monthlyRate);
                    }
                    
                    monthlyDetails.push({
                        month: month,
                        sip: currentSIP,
                        invested: totalInvested,
                        value: currentValue
                    });
                }
                
                const yearEndValue = currentValue;
                const yearGrowth = yearEndValue - yearStartValue - yearInvestment;
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-3 py-2 text-gray-900 font-medium">Year ${year}</td>
                    <td class="px-3 py-2 text-right text-gray-900">‚Çπ${Math.round(currentSIP).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-right text-blue-600">‚Çπ${Math.round(yearInvestment).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-right text-gray-900">‚Çπ${Math.round(totalInvested).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-right text-green-600 font-medium">‚Çπ${Math.round(yearEndValue).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-center">
                        <button onclick="toggleMonthlyDetails(${year})" class="text-blue-600 hover:text-blue-800 text-xs px-2 py-1 border border-blue-300 rounded hover:bg-blue-50">
                            View Months
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
                
                // Hidden monthly details row
                const detailsRow = document.createElement('tr');
                detailsRow.id = `monthlyDetails${year}`;
                detailsRow.className = 'hidden';
                detailsRow.innerHTML = `
                    <td colspan="6" class="px-3 py-2 bg-gray-50">
                        <div class="max-h-40 overflow-y-auto">
                            <table class="w-full text-xs">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="px-2 py-1 text-left">Month</th>
                                        <th class="px-2 py-1 text-right">Monthly SIP</th>
                                        <th class="px-2 py-1 text-right">Cumulative Invested</th>
                                        <th class="px-2 py-1 text-right">Portfolio Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${monthlyDetails.map(detail => `
                                        <tr class="hover:bg-gray-200">
                                            <td class="px-2 py-1">${detail.month}</td>
                                            <td class="px-2 py-1 text-right">‚Çπ${Math.round(detail.sip).toLocaleString('en-IN')}</td>
                                            <td class="px-2 py-1 text-right">‚Çπ${Math.round(detail.invested).toLocaleString('en-IN')}</td>
                                            <td class="px-2 py-1 text-right text-green-600">‚Çπ${Math.round(detail.value).toLocaleString('en-IN')}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </td>
                `;
                tableBody.appendChild(detailsRow);
                
                // Increment SIP for next year
                if (annualIncrement > 0) {
                    currentSIP = currentSIP * (1 + annualIncrement);
                }
            }
            
            // Holding period (no new investments, just growth)
            if (holdingPeriod > 0) {
                const finalInvested = totalInvested;
                const sipEndValue = currentValue;
                
                for (let holdYear = 1; holdYear <= holdingPeriod; holdYear++) {
                    const holdingValue = sipEndValue * Math.pow(1 + r, holdYear);
                    const yearGrowth = holdingValue - (holdYear === 1 ? sipEndValue : sipEndValue * Math.pow(1 + r, holdYear - 1));
                    
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-blue-50 bg-blue-25';
                    row.innerHTML = `
                        <td class="px-3 py-2 text-blue-700 font-medium">Hold ${holdYear}</td>
                        <td class="px-3 py-2 text-right text-blue-700">‚Çπ0</td>
                        <td class="px-3 py-2 text-right text-blue-600">‚Çπ0</td>
                        <td class="px-3 py-2 text-right text-gray-900">‚Çπ${Math.round(finalInvested).toLocaleString('en-IN')}</td>
                        <td class="px-3 py-2 text-right text-green-600 font-medium">‚Çπ${Math.round(holdingValue).toLocaleString('en-IN')}</td>
                        <td class="px-3 py-2 text-center text-blue-600 text-xs">Growth: ‚Çπ${Math.round(yearGrowth).toLocaleString('en-IN')}</td>
                    `;
                    tableBody.appendChild(row);
                }
            }
        }
        
        // Toggle monthly details visibility
        function toggleMonthlyDetails(year) {
            const detailsRow = document.getElementById(`monthlyDetails${year}`);
            const button = event.target;
            
            if (detailsRow.classList.contains('hidden')) {
                detailsRow.classList.remove('hidden');
                button.textContent = 'Hide Months';
                button.classList.add('bg-blue-100');
            } else {
                detailsRow.classList.add('hidden');
                button.textContent = 'View Months';
                button.classList.remove('bg-blue-100');
            }
        }

        // Generate Lumpsum Table
        function generateLumpsumTable() {
            const P = parseFloat(document.getElementById('lumpsumAmount').value);
            const r = parseFloat(document.getElementById('lumpsumRate').value) / 100;
            const t = parseFloat(document.getElementById('lumpsumYears').value);
            
            if (P <= 0 || r <= 0 || t <= 0) {
                return;
            }
            
            const monthlyRate = r / 12;
            
            const tableBody = document.getElementById('lumpsumTableBody');
            tableBody.innerHTML = '';
            
            // Yearly breakdown for lumpsum
            for (let year = 1; year <= t; year++) {
                const yearStartValue = year === 1 ? P : P * Math.pow(1 + r, year - 1);
                const yearEndValue = P * Math.pow(1 + r, year);
                const yearGrowth = yearEndValue - yearStartValue;
                const totalReturns = yearEndValue - P;
                
                // Calculate monthly details for this year
                let monthlyDetails = [];
                for (let month = 1; month <= 12; month++) {
                    const globalMonth = (year - 1) * 12 + month;
                    const monthValue = P * Math.pow(1 + monthlyRate, globalMonth);
                    const monthGrowth = month === 1 ? 
                        (monthValue - yearStartValue) : 
                        (monthValue - P * Math.pow(1 + monthlyRate, globalMonth - 1));
                    const monthReturns = monthValue - P;
                    
                    monthlyDetails.push({
                        month: month,
                        growth: monthGrowth,
                        value: monthValue,
                        returns: monthReturns
                    });
                }
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-3 py-2 text-gray-900 font-medium">Year ${year}</td>
                    <td class="px-3 py-2 text-right text-blue-600">‚Çπ${Math.round(yearGrowth).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-right text-gray-900">‚Çπ${Math.round(yearEndValue).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-right text-green-600 font-medium">‚Çπ${Math.round(totalReturns).toLocaleString('en-IN')}</td>
                    <td class="px-3 py-2 text-center">
                        <button onclick="toggleLumpsumMonthlyDetails(${year})" class="text-blue-600 hover:text-blue-800 text-xs px-2 py-1 border border-blue-300 rounded hover:bg-blue-50">
                            View Months
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
                
                // Hidden monthly details row
                const detailsRow = document.createElement('tr');
                detailsRow.id = `lumpsumMonthlyDetails${year}`;
                detailsRow.className = 'hidden';
                detailsRow.innerHTML = `
                    <td colspan="5" class="px-3 py-2 bg-gray-50">
                        <div class="max-h-40 overflow-y-auto">
                            <table class="w-full text-xs">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="px-2 py-1 text-left">Month</th>
                                        <th class="px-2 py-1 text-right">Monthly Growth</th>
                                        <th class="px-2 py-1 text-right">Current Value</th>
                                        <th class="px-2 py-1 text-right">Total Returns</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${monthlyDetails.map(detail => `
                                        <tr class="hover:bg-gray-200">
                                            <td class="px-2 py-1">${detail.month}</td>
                                            <td class="px-2 py-1 text-right text-blue-600">‚Çπ${Math.round(detail.growth).toLocaleString('en-IN')}</td>
                                            <td class="px-2 py-1 text-right">‚Çπ${Math.round(detail.value).toLocaleString('en-IN')}</td>
                                            <td class="px-2 py-1 text-right text-green-600">‚Çπ${Math.round(detail.returns).toLocaleString('en-IN')}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </td>
                `;
                tableBody.appendChild(detailsRow);
            }
        }
        
        // Toggle lumpsum monthly details visibility
        function toggleLumpsumMonthlyDetails(year) {
            const detailsRow = document.getElementById(`lumpsumMonthlyDetails${year}`);
            const button = event.target;
            
            if (detailsRow.classList.contains('hidden')) {
                detailsRow.classList.remove('hidden');
                button.textContent = 'Hide Months';
                button.classList.add('bg-blue-100');
            } else {
                detailsRow.classList.add('hidden');
                button.textContent = 'View Months';
                button.classList.remove('bg-blue-100');
            }
        }

        // Create SIP Growth Chart
        function createSIPChart(monthlyInvestment, monthlyRate, years, annualIncrement = 0, holdingPeriod = 0) {
            const ctx = document.getElementById('sipChart').getContext('2d');
            
            if (sipChart) {
                sipChart.destroy();
            }
            
            const labels = [];
            const investedData = [];
            const valueData = [];
            
            let totalInvested = 0;
            let totalValue = 0;
            let currentSIP = monthlyInvestment;
            
            // SIP investment period
            for (let year = 1; year <= years; year++) {
                if (annualIncrement > 0) {
                    // Calculate with increment
                    const monthsInYear = 12;
                    const totalMonths = years * 12;
                    const remainingMonths = totalMonths - ((year - 1) * 12);
                    const monthsToCalculate = Math.min(monthsInYear, remainingMonths);
                    
                    const yearInvested = currentSIP * monthsToCalculate;
                    const yearValue = currentSIP * (((Math.pow(1 + monthlyRate, remainingMonths) - Math.pow(1 + monthlyRate, remainingMonths - monthsToCalculate)) / monthlyRate) * (1 + monthlyRate));
                    
                    totalInvested += yearInvested;
                    totalValue += yearValue;
                    
                    currentSIP = currentSIP * (1 + annualIncrement);
                } else {
                    // Standard calculation
                    const months = year * 12;
                    totalInvested = monthlyInvestment * months;
                    totalValue = monthlyInvestment * (((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate) * (1 + monthlyRate));
                }
                
                labels.push(`Year ${year}`);
                investedData.push(Math.round(totalInvested));
                valueData.push(Math.round(totalValue));
            }
            
            // Holding period (no new investments, just growth)
            if (holdingPeriod > 0) {
                const finalInvested = totalInvested;
                const sipEndValue = totalValue;
                
                for (let holdYear = 1; holdYear <= holdingPeriod; holdYear++) {
                    const holdingValue = sipEndValue * Math.pow(1 + (monthlyRate * 12), holdYear);
                    
                    labels.push(`Hold ${holdYear}`);
                    investedData.push(Math.round(finalInvested));
                    valueData.push(Math.round(holdingValue));
                }
            }
            
            let titleText = 'SIP Growth Over Time';
            if (annualIncrement > 0 && holdingPeriod > 0) {
                titleText = `SIP Growth with ${(annualIncrement * 100).toFixed(1)}% Increment + ${holdingPeriod} Year Hold`;
            } else if (annualIncrement > 0) {
                titleText = `SIP Growth with ${(annualIncrement * 100).toFixed(1)}% Annual Increment`;
            } else if (holdingPeriod > 0) {
                titleText = `SIP Growth + ${holdingPeriod} Year Holding Period`;
            }
            
            sipChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Amount Invested',
                        data: investedData,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Investment Value',
                        data: valueData,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: titleText
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Çπ' + value.toLocaleString('en-IN');
                                }
                            }
                        }
                    }
                }
            });
        }

        // Create Lumpsum Growth Chart
        function createLumpsumChart(principal, rate, years) {
            const ctx = document.getElementById('lumpsumChart').getContext('2d');
            
            if (lumpsumChart) {
                lumpsumChart.destroy();
            }
            
            const labels = [];
            const valueData = [];
            
            for (let year = 1; year <= years; year++) {
                const value = principal * Math.pow(1 + rate, year);
                labels.push(`Year ${year}`);
                valueData.push(value);
            }
            
            lumpsumChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Investment Value',
                        data: valueData,
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Lumpsum Growth Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Çπ' + value.toLocaleString('en-IN');
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a47debe2c2599a',t:'MTc1NDM3ODAwNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
